[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Cartographie avec R",
    "section": "",
    "text": "Preamble\nThe aim of this document is to provide support for learning thematic mapping with R.\nHow to use the manual\nThe data used in this document is stored in an RStudio project. You need to download it and unzip it on your machine. You will then be able to test all data processing proposed in this document using the geodata project.\nDownload project\nContribution and feedback\nYou can send us your comments and suggestions by posting an issue on the GitHub repository of this document.\nContext\nThis manual was initially designed for the ‚ÄúCartography with R‚Äù course of the ‚ÄúG√©omatique, g√©od√©cisionnel, g√©omarketing et multim√©dia‚Äù master (G2M - Universit√© Paris 8 Vincennes - Saint-Denis).\nA second manual focusing on geomatics is available here : G√©omatique avec R.\n\n To cite the document:\nGiraud, T. et Pecout, H. (2024). Cartographie avec R. https://doi.org/10.5281/zenodo.5905734",
    "crumbs": [
      "*Preamble*"
    ]
  },
  {
    "objectID": "01_mapsf.html",
    "href": "01_mapsf.html",
    "title": "1¬† mapsf",
    "section": "",
    "text": "1.1 Presentation\nThe spatial ecosystem of R is rich, dynamic and mature and several packages can be used to import, process and represent spatial data. The mapsf package (Giraud 2023) is a part of this ecosystem and can be used to create high-quality thematic maps.\nIn this document, we will mainly be using the mapsf package, which has fairly comprehensive functionality and is fairly easy to learn. What‚Äôs more, the package is relatively lightweight.\nmapsf can be used to create most of the map types commonly used in statistical cartography (choropleth maps, typologies, proportional or graduated symbols, etc.).\nFor each type of map, a number of parameters can be used to customise the cartographic representation. These parameters are the same as those found in standard GIS or cartography software (for example, the choice of discretisations and colour palettes, changing the size of symbols or customising legends).\nIn addition to the data representation functions, other functions are dedicated to cartographic design (themes or graphic charters, legends, scales, orientation arrows, titles, credits, annotations, etc.), the creation of insets or map export.",
    "crumbs": [
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>mapsf</span>"
    ]
  },
  {
    "objectID": "01_mapsf.html#presentation",
    "href": "01_mapsf.html#presentation",
    "title": "1¬† mapsf",
    "section": "",
    "text": "A typical processing chain\n\n\n\n\n\n\n\n\nOther packages can be used to create thematic maps.\nThe ggplot2 package (Wickham 2016), in conjunction with the ggspatial package (Dunnington 2023), can be used to display spatial objects and create simple thematic maps.\nThe tmap package (Tennekes 2018) is dedicated to creating thematic maps, and uses a syntax similar to that of ggplot2 (sequence of instructions combined with the + sign).\nDocumentation and tutorials for using these two packages are readily available on the web.\n\n\n\n\n\n\n\nA minimal number of well-known dependencies",
    "crumbs": [
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>mapsf</span>"
    ]
  },
  {
    "objectID": "01_mapsf.html#documentation",
    "href": "01_mapsf.html#documentation",
    "title": "1¬† mapsf",
    "section": "1.2 Documentation",
    "text": "1.2 Documentation\n\n\n\n\n\n\nWebsite : \n\n\ncheat sheet : \n\n\n\nVignettes :\n\nGet started\nHow to create faceted maps\nHow to create inset maps\nHow to export maps\nHow to use a custom font family\nHow to use themes",
    "crumbs": [
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>mapsf</span>"
    ]
  },
  {
    "objectID": "01_mapsf.html#exercice",
    "href": "01_mapsf.html#exercice",
    "title": "1¬† mapsf",
    "section": "Exercice",
    "text": "Exercice\n\nThe data used in this document is stored in an RStudio project. You must download it and unzip it on your machine. You will then be able to test all the operations proposed in this document within the geodata project.\nDownload the project\nWe will mainly use the mapsf package.\nInstall it using the install.packages() function.\nWhat is the version of the package?\nWhat is new compared to the previous version?\n\n\n\n\n\nDunnington, Dewey. 2023. Ggspatial: Spatial Data Framework for Ggplot2. https://CRAN.R-project.org/package=ggspatial.\n\n\nGiraud, Timoth√©e. 2023. Mapsf: Thematic Cartography. https://CRAN.R-project.org/package=mapsf.\n\n\nTennekes, Martijn. 2018. ‚Äútmap: Thematic Maps in R.‚Äù Journal of Statistical Software 84 (6): 1‚Äì39. https://doi.org/10.18637/jss.v084.i06.\n\n\nWickham, Hadley. 2016. Ggplot2: Elegant Graphics for Data Analysis. Springer-Verlag New York. https://ggplot2.tidyverse.org.",
    "crumbs": [
      "<span class='chapter-number'>1</span>¬† <span class='chapter-title'>mapsf</span>"
    ]
  },
  {
    "objectID": "02_semiologie.html",
    "href": "02_semiologie.html",
    "title": "2¬† The Cartographical Language",
    "section": "",
    "text": "Exercice\nüîó Thematic Cartography - Cartographical Language\nHow to represent the following variables :",
    "crumbs": [
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>The Cartographical Language</span>"
    ]
  },
  {
    "objectID": "02_semiologie.html#exercice",
    "href": "02_semiologie.html#exercice",
    "title": "2¬† The Cartographical Language",
    "section": "",
    "text": "A municipal population\nA median age by department\nA growth rate\nThe administrative status of a commune (prefecture, sub-prefecture, simple commune, etc.)\nLife expectancy per country",
    "crumbs": [
      "<span class='chapter-number'>2</span>¬† <span class='chapter-title'>The Cartographical Language</span>"
    ]
  },
  {
    "objectID": "03_types_de_cartes.html",
    "href": "03_types_de_cartes.html",
    "title": "3¬† Map Types",
    "section": "",
    "text": "3.1 Sample data set\nmf_map() is the main function of the package, it displays map layers on a georeferenced plot.\nmf_map() has three main arguments:\nMany parameters are available to fine tune symbologies and legends.\nImport map layers from the geopackage file lot.gpkg.\nlibrary(sf)\n\n#&gt; Linking to GEOS 3.13.0, GDAL 3.10.2, PROJ 9.5.1; sf_use_s2() is TRUE\n\n# import municipalities\ncom &lt;- st_read(\"data/lot.gpkg\", layer = \"communes\", quiet = TRUE)\n# import french departements \ndep &lt;- st_read(\"data/lot.gpkg\", layer = \"departements\", quiet = TRUE)\n# import restaurants\nresto &lt;- st_read(\"data/lot.gpkg\", layer = \"restaurants\", quiet = TRUE)\n# import someroads\nroute &lt;- st_read(\"data/lot.gpkg\", layer = \"routes\", quiet = TRUE)",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Map Types</span>"
    ]
  },
  {
    "objectID": "03_types_de_cartes.html#geometries",
    "href": "03_types_de_cartes.html#geometries",
    "title": "3¬† Map Types",
    "section": "3.2 Geometries",
    "text": "3.2 Geometries\nmf_map(x, type = \"base\") displays sf objects geometries.\n\nlibrary(mapsf)\n# polygones\nmf_map(x = com, border = \"white\")\n# D√©partements (polygones, fond transparent)\nmf_map(x = dep, lwd = 2, col = NA, add = TRUE)\n# Routes (polylignes)\nmf_map(x = route, lwd = .7, col = \"ivory4\", add = TRUE)\n# Restaurants (points)\nmf_map(x = resto, pch = 20, cex = .7, col = \"darkred\", add = TRUE)\n# Ajour d'un titre\nmf_title(txt = \"Le Lot (46)\")",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Map Types</span>"
    ]
  },
  {
    "objectID": "03_types_de_cartes.html#proportional-symbols",
    "href": "03_types_de_cartes.html#proportional-symbols",
    "title": "3¬† Map Types",
    "section": "3.3 Proportional Symbols",
    "text": "3.3 Proportional Symbols\nmf_map(x, var, type = \"prop\") displays symbols with areas proportional to a quantitative variable (stocks). The inches argument is used to customize the symbols sizes.\n\n# Communes\nmf_map(x = com)\n# Symboles proportionnels\nmf_map(\n  x = com, \n  var = \"POPULATION\",\n  type = \"prop\",\n  leg_title = \"Population totale\\n(2015)\"\n)\n# Titre\nmf_title(\"Distribution de la population dans le Lot\")",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Map Types</span>"
    ]
  },
  {
    "objectID": "03_types_de_cartes.html#choropleth-map",
    "href": "03_types_de_cartes.html#choropleth-map",
    "title": "3¬† Map Types",
    "section": "3.4 Choropleth Map",
    "text": "3.4 Choropleth Map\nIn choropleth maps, areas are shaded according to the variation of a quantitative variable. They are used to represent ratios or indices. mf_map(x, var, type = \"choro\") displays choropleth maps . Arguments nbreaks, and breaks allow to customize the variable classification.\n\n# Densit√© de population (hab./km2) en utilisant la fonction sf::st_area()\ncom$DENS &lt;- 1e6 * com$POPULATION / as.numeric(st_area(com))\nmf_map(\n  x = com,\n  var = \"DENS\",\n  type = \"choro\",\n  breaks = \"quantile\",\n  nbreaks = 6,\n  pal = \"Dark Mint\",\n  lwd = 1,\n  leg_title = \"Densit√© de population\\n(habitants par km2)\", \n  leg_val_rnd = 0\n)\nmf_title(\"Distribution de la population dans le Lot (2018)\")\n\n\n\n\n\n\n\n\n\n3.4.1 Color palettes\nColor palettes, defined with pal, can be created with mf_get_pal() or you can use palette names from hcl.pals().\nmf_map(x = com, var = \"DENS\", type = \"choro\",\n       breaks = \"quantile\", nbreaks = 4, \n       pal = \"Peach\")\nmf_title(\"Palette d√©finie par son nom\")\nma_palette &lt;- c(\"#F3CAD2\", \"#E08BB1\", \"#AF4F91\", \"#6D1C68\")\nmf_map(x = com, var = \"DENS\", type = \"choro\",\n       breaks = \"quantile\", nbreaks = 4, \n       pal = ma_palette)\nmf_title(\"Palette d√©finie par un vecteur de couleurs\")\n\n\n\n\n\n\n\n\n\n\n\n\n\nBuiltin R color palettes\n\n\n\n\n3.4.2 Classifications\nBefore creating a choropleth map, we must first study the statistical distribution of the variable we wish to map. The mf_distr() function is used to visualise distributions.\n\nmf_distr(com$DENS)\n\n\n\n\n\n\n\n\nThis distribution is very skewed to the left.\nmf_get_breaks() can be used to classify continuous variables. Many classification methods are available ( ‚Äúfixed‚Äù, ‚Äúsd‚Äù, ‚Äúequal‚Äù, ‚Äúpretty‚Äù, ‚Äúquantile‚Äù, ‚Äúkmeans‚Äù, ‚Äúhclust‚Äù, ‚Äúbclust‚Äù, ‚Äúfisher‚Äù, ‚Äújenks‚Äù, ‚Äúdpih‚Äù, ‚Äúq6‚Äù, ‚ÄúQ6‚Äù, geom‚Äù, ‚Äúarith‚Äù, ‚Äúem‚Äù, ‚Äúmsd‚Äù or ‚Äúckmeans‚Äù).\nHere, using the ‚Äògeom‚Äô method is quite appropriate.\n\nbks &lt;- mf_get_breaks(x = com$DENS, nbreaks = 5, breaks = \"geom\") \nbks\n\n#&gt; [1]   4.113775  11.033758  29.594181  79.376000 212.898252 571.024813\n\nmf_map(\n  x = com, var = \"DENS\", type = \"choro\",\n  breaks = bks, pal = \"Blues\",\n  lwd = 1,\n  leg_title = \"Population density\\n(inh. per km2)\", \n  leg_val_rnd = 0\n)\nmf_title(\"Distribution de la population dans le Lot (2018)\")",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Map Types</span>"
    ]
  },
  {
    "objectID": "03_types_de_cartes.html#typology-map",
    "href": "03_types_de_cartes.html#typology-map",
    "title": "3¬† Map Types",
    "section": "3.5 Typology Map",
    "text": "3.5 Typology Map\nmf_map(x, var, type = \"typo\") displays a typology map of a qualitative variable. val_order is used to set the modalities order in the legend.\n\nmf_map(\n  x = com,\n  var=\"STATUT\",\n  type = \"typo\",\n  pal = c(\"aquamarine4\", \"yellow3\",\"wheat\"),\n  lwd = .7,\n  leg_title = \"\"\n)\nmf_title(\"Statut administratif des communes\")\n\n\n\n\n\n\n\n\nThe val_order argument is used to order the modalities in the legend.\n\nmf_map(\n  x = com,\n  var=\"STATUT\",\n  type = \"typo\",\n  pal = c(\"aquamarine4\", \"yellow3\",\"wheat\"),\n  val_order = c(\"Pr√©fecture\", \"Sous-pr√©fecture\", \"Commune simple\"),\n  lwd = .7,\n  leg_title = \"\"\n)\nmf_title(\"Statut administratif des communes\")",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Map Types</span>"
    ]
  },
  {
    "objectID": "03_types_de_cartes.html#proportional-symbols-using-choropleth-coloration",
    "href": "03_types_de_cartes.html#proportional-symbols-using-choropleth-coloration",
    "title": "3¬† Map Types",
    "section": "3.6 Proportional Symbols using Choropleth Coloration",
    "text": "3.6 Proportional Symbols using Choropleth Coloration\nmf_map(x, var, type = \"prop_choro\") creates a map of symbols that are proportional to values of a first variable and colored to reflect the classification of a second variable.\n\nmf_map(x = com)\nmf_map(\n  x = com,\n  var = c(\"POPULATION\", \"DENS\"),\n  type = \"prop_choro\",\n  border = \"grey50\",\n  lwd = 1,\n  leg_title = c(\"Population\", \"Densit√©\\nde population\\n(en hab./km2)\"),\n  breaks = \"q6\",\n  pal = \"Magenta\",\n  leg_val_rnd = c(0,1))\nmf_title(\"Distribution de la population dans le Lot (2018)\")",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Map Types</span>"
    ]
  },
  {
    "objectID": "03_types_de_cartes.html#proportional-symbols-using-typology-coloration",
    "href": "03_types_de_cartes.html#proportional-symbols-using-typology-coloration",
    "title": "3¬† Map Types",
    "section": "3.7 Proportional Symbols using Typology Coloration",
    "text": "3.7 Proportional Symbols using Typology Coloration\nmf_map(x, var, type = \"prop_typo\") creates a map of symbols that are proportional to values of a first variable and colored to reflect the modalities of a second qualitative variable.\n\nmf_map(x = com)\nmf_map(\n  x = com,\n  var = c(\"POPULATION\", \"STATUT\"),\n  type = \"prop_typo\",\n  pal = c(\"aquamarine4\", \"yellow3\",\"wheat\"),\n  val_order = c(\"Pr√©fecture\", \"Sous-pr√©fecture\", \"Commune simple\"),\n  leg_pos = \"topleft\",\n  leg_title = c(\"Population\\n(2015)\",\n                \"Statut administratif\"),\n)\nmf_title(\"Distribution de la population dans le Lot (2018)\")",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Map Types</span>"
    ]
  },
  {
    "objectID": "03_types_de_cartes.html#exercice",
    "href": "03_types_de_cartes.html#exercice",
    "title": "3¬† Map Types",
    "section": "Exercice",
    "text": "Exercice\n\nImport the communes layer for the Lot department from the geopackage lot.gpkg file.\nImport the com.csv file.\nThis dataset covers the communes of the Lot department and contains several additional variables:\n\nthe number of employees (ACT).\nthe number of people employed in industry (IND)\nthe share of the working population in the total population (SACT)\nthe share of the workforce in industry in the total workforce (SACT_IND)\n\nAttach the dataset and the municipalities layer.\nCreate a map of the active population.\nWhich representation method should be used? What choices does this involve?\nCreate a map of the share of the working population in the total population.\nWhat representation method should be used? What choices does this involve?\n\n\n\n\n\n\n\nYou can use the file exo_cartographie_simple.R to guide you through this exercise.",
    "crumbs": [
      "<span class='chapter-number'>3</span>¬† <span class='chapter-title'>Map Types</span>"
    ]
  },
  {
    "objectID": "04_mise_en_page.html",
    "href": "04_mise_en_page.html",
    "title": "4¬† Map Layout",
    "section": "",
    "text": "4.1 Sample data set\nImport map layers from the geopackage file lot.gpkg.\nlibrary(sf)\n# import des communes du Lot\ncom &lt;- st_read(\"data/lot.gpkg\", layer = \"communes\", quiet = TRUE)\n# import des d√©partements fran√ßais\ndep &lt;- st_read(\"data/lot.gpkg\", layer = \"departements\", quiet = TRUE)\n# import des restaurants\nresto &lt;- st_read(\"data/lot.gpkg\", layer = \"restaurants\", quiet = TRUE)\n# import des routes autour de la commune de Gramat\nroute &lt;- st_read(\"data/lot.gpkg\", layer = \"routes\", quiet = TRUE)",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Map Layout</span>"
    ]
  },
  {
    "objectID": "04_mise_en_page.html#titles",
    "href": "04_mise_en_page.html#titles",
    "title": "4¬† Map Layout",
    "section": "4.2 Titles",
    "text": "4.2 Titles\nmf_title() displays a title.\n\nmf_theme(\"default\")\nmf_map(com)\nmf_title(\"Titre de la carte\")",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Map Layout</span>"
    ]
  },
  {
    "objectID": "04_mise_en_page.html#fl√®che-dorientation-et-√©chelle",
    "href": "04_mise_en_page.html#fl√®che-dorientation-et-√©chelle",
    "title": "4¬† Map Layout",
    "section": "4.3 Fl√®che d‚Äôorientation et √©chelle",
    "text": "4.3 Fl√®che d‚Äôorientation et √©chelle\nLa fonction mf_arrow() permet de choisir la position et l‚Äôaspect de la fl√®che d‚Äôorientation.\nLa fonction mf_scale() permet de choisir la position et l‚Äôaspect de l‚Äô√©chelle.\n\nmf_map(com)\nmf_scale(size = 20, lwd = 2, cex = 1.2)\nmf_arrow()",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Map Layout</span>"
    ]
  },
  {
    "objectID": "04_mise_en_page.html#cr√©dits",
    "href": "04_mise_en_page.html#cr√©dits",
    "title": "4¬† Map Layout",
    "section": "4.4 Cr√©dits",
    "text": "4.4 Cr√©dits\nLa fonction mf_credits() permet d‚Äôafficher une ligne de cr√©dits (sources, auteur‚Ä¶).\n\nmf_map(com)\nmf_credits(\"Auteurs : TG & HP\\nSources : IGN, 2018\")",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Map Layout</span>"
    ]
  },
  {
    "objectID": "04_mise_en_page.html#full-layout",
    "href": "04_mise_en_page.html#full-layout",
    "title": "4¬† Map Layout",
    "section": "4.5 Full layout",
    "text": "4.5 Full layout\nLa fonction mf_layout() permet d‚Äôafficher tous ces √©l√©ments (titre, c.\n\nmf_map(com)\nmf_layout(\n  title = \"Le Lot\",\n  credits = \"Auteurs : TG & HP\\nSources : IGN, 2018\",\n  arrow = TRUE, \n  scale = TRUE\n)",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Map Layout</span>"
    ]
  },
  {
    "objectID": "04_mise_en_page.html#annotations",
    "href": "04_mise_en_page.html#annotations",
    "title": "4¬† Map Layout",
    "section": "4.6 Annotations",
    "text": "4.6 Annotations\n\n# S√©lection d'une commune\ncahors &lt;- com[com$NOM_COM == \"Cahors\", ]\nmf_map(com)\nmf_annotation(\n  x = cahors, \n  txt = \"Cahors\", \n  halo = TRUE, \n  cex = 1.5\n)",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Map Layout</span>"
    ]
  },
  {
    "objectID": "04_mise_en_page.html#labels",
    "href": "04_mise_en_page.html#labels",
    "title": "4¬† Map Layout",
    "section": "4.7 Labels",
    "text": "4.7 Labels\nLa fonction mf_label() est d√©di√©e √† l‚Äôaffichage d‚Äô√©tiquettes.\n\n# Selection des communes qui intersectent la \n# commune de Cahors\ncom_sel &lt;- st_filter(com, com[com$NOM_COM == \"Cahors\", ])\nmf_map(com_sel)\nmf_label(\n  x = com_sel,\n  var = \"NOM_COM\",\n  col= \"black\",\n  halo = TRUE,\n  overlap = FALSE, \n  lines = FALSE\n)\nmf_scale()\n\n\n\n\n\n\n\n\nL‚Äôargument halo = TRUE permet d‚Äôafficher un l√©ger halo autour des √©tiquettes et l‚Äôargument overlap = FALSE permet de cr√©er des √©tiquettes ne se recouvrant pas.",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Map Layout</span>"
    ]
  },
  {
    "objectID": "04_mise_en_page.html#les-l√©gendes",
    "href": "04_mise_en_page.html#les-l√©gendes",
    "title": "4¬† Map Layout",
    "section": "4.8 Les l√©gendes",
    "text": "4.8 Les l√©gendes\nLa fonction mf_legend() permet d‚Äôafficher des l√©gendes.\n\nmf_map(com)\nmf_legend(\n  type = \"prop\", \n  val = c(1000,500,200,10), \n  inches = .4, \n  title = \"Population\", \n  pos = \"topleft\"\n)\nmf_legend(\n  type = \"choro\", \n  val = c(0,10,20,30,40),\n  pal = \"Greens\", \n  pos = \"bottomright\", \n  val_rnd = 0\n)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nLe package maplegend\n\n\n\nLa fonction mf_legend() s‚Äôappuie sur le package maplegend",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Map Layout</span>"
    ]
  },
  {
    "objectID": "04_mise_en_page.html#centrer-la-carte-sur-une-r√©gion",
    "href": "04_mise_en_page.html#centrer-la-carte-sur-une-r√©gion",
    "title": "4¬† Map Layout",
    "section": "4.9 Centrer la carte sur une r√©gion",
    "text": "4.9 Centrer la carte sur une r√©gion\nLa fonction mf_map() permet d‚Äôinitialiser une carte en la centrant sur une objet spatial en choisissant un fond et des bordures transparantes.\n\nmf_map(x = com_sel, col = NA, border = NA)\nmf_map(com, add = TRUE)\nmf_map(com_sel, col = NA, border = \"red\", lwd = 2, add = TRUE)",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Map Layout</span>"
    ]
  },
  {
    "objectID": "04_mise_en_page.html#afficher-plusieurs-cartes-sur-la-m√™me-figure",
    "href": "04_mise_en_page.html#afficher-plusieurs-cartes-sur-la-m√™me-figure",
    "title": "4¬† Map Layout",
    "section": "4.10 Afficher plusieurs cartes sur la m√™me figure",
    "text": "4.10 Afficher plusieurs cartes sur la m√™me figure\nIl faut ici utiliser l‚Äôargument mfrow de la fonction par(). Le premier chiffre repr√©sente le nombre lignes et le deuxi√®me le nombre de colonnes.\nPar exemple par(mfrow = c(1, 2)) (1 ligne et 2 colonnes) permet d‚Äôafficher deux cartes c√¥te √† c√¥te.\n\n# define the figure layout (1 row, 2 columns)\nopar &lt;- par(mfrow = c(1, 2))\n# define theme\nmf_theme(\"default\", mar = c(0,0,1.2,0), tab = FALSE, pos = \"center\")\n# first map\nmf_map(com)\nmf_map(com, \"TER_F\", \"prop\", \n       inches = .2,\n       val_max = 4000, \n       leg_pos = \"topleft\", \n       leg_title = \"N.\")\nmf_title(\"Tertiaire: Femmes\")\n# second map\nmf_map(com)\nmf_map(com, \"TER_H\", \"prop\",\n       inches = .2,\n       val_max = 4000, \n       leg_pos = NA)\nmf_title(\"Hommes\")\npar(opar)\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nComparer des cartes de cercles proportionnels\n\n\n\nNotons ici l‚Äôutilisation des arguments inches et val_max avec des valeurs identiques pour les deux carte. Cela rend possible les comparaisons entres les deux cartes.\n\n\n\n\n\n\n\n\nVignette\n\n\n\nHow to Create Faceted Maps",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Map Layout</span>"
    ]
  },
  {
    "objectID": "04_mise_en_page.html#export-des-cartes",
    "href": "04_mise_en_page.html#export-des-cartes",
    "title": "4¬† Map Layout",
    "section": "4.11 Export des cartes",
    "text": "4.11 Export des cartes\nmf_export() permet d‚Äôexporter des cartes en PNG ou en SVG.\nLe ratio hauteur/largeur de la carte correspondra au ratio hauteur/largeur d‚Äôun objet spatial.\nSi width est sp√©cifi√© alors height est d√©duit du ratio hauteur/largeur de x, de la taille des marges de la figure et des dimensions du titre (du th√®me utilis√© en somme).\nmf_export() peut aussi √™tre utilis√© pour ajouter de l‚Äôespace sur un ou plusieurs c√¥t√© de la carte ou encore centrer la carte sur une zone particuli√®re.\n\n\n\n\n\n\nToujours utiliser add = TRUE apr√®s un appel √† mf_export() et ne pas oublier d‚Äôutiliser dev.off() pour finaliser l‚Äôexport de la figure.\n\n\n\n\n#cr√©ation d'un th√®me personnel\nmf_theme(\"candy\", bg = \"grey80\")\nmf_export(\n  x = com, \n  filename = \"img/com_default.png\",\n  width = 600\n)\nmf_map(com, add = TRUE)\nmf_title(\"Le Lot\")\ndev.off()\n\n\nL‚Äôemprise de cette carte est exactement celle de la r√©gion affich√©e.\nLors de l‚Äôexport suivant nous ajoutons de l‚Äôespace sur la partie droite de la carte (50% de la largeur de x).\n\nmf_export(\n  x = com, \n  filename = \"img/com_expand.png\",\n  width = 600, \n  expandBB = c(0, 0, 0, .5)\n)\nmf_map(com, add = TRUE)\nmf_title(\"Le Lot\")\ndev.off()\n\n\n\n\n\n\n\n\nVignette\n\n\n\nHow to Export Maps",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Map Layout</span>"
    ]
  },
  {
    "objectID": "04_mise_en_page.html#ajouter-une-image-sur-une-carte",
    "href": "04_mise_en_page.html#ajouter-une-image-sur-une-carte",
    "title": "4¬† Map Layout",
    "section": "4.12 Ajouter une image sur une carte",
    "text": "4.12 Ajouter une image sur une carte\nCela peut √™tre utile pour ajouter un logo, un pictogramme. La fonction readPNG() du package png permet l‚Äôajout d‚Äôimages sur une figure.\n\nmf_theme(\"default\", mar = c(0,0,0,0))\nlibrary(png)\n# import de l'image\nlogo &lt;- readPNG(\"img/Logo CG 46 - Bleu.png\")\n# dimension de l'image en unit√© de la carte\npp &lt;- dim(logo)[2:1] * 20\n# D√©finition d'un point d'encrage de l'image dans la figure, ici\n# le coin sup√©rieur gauche de la bounding box du d√©partement\nxy &lt;- st_bbox(com)[c(1,4)]\nmf_map(com, col = \"#D1914D\", border = \"white\")\nrasterImage(\n  image   = logo,\n  xleft   = xy[1],\n  ybottom = xy[2] - pp[2],\n  xright  = xy[1] + pp[1],\n  ytop    = xy[2]\n)",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Map Layout</span>"
    ]
  },
  {
    "objectID": "04_mise_en_page.html#placer-pr√©cis√©ment-un-√©l√©ment-sur-la-carte",
    "href": "04_mise_en_page.html#placer-pr√©cis√©ment-un-√©l√©ment-sur-la-carte",
    "title": "4¬† Map Layout",
    "section": "4.13 Placer pr√©cis√©ment un √©l√©ment sur la carte",
    "text": "4.13 Placer pr√©cis√©ment un √©l√©ment sur la carte\nDans plusieurs fonctions de mapsf il est possible de placer des √©l√©ments d‚Äôhabillage de mani√®re interactive avec la position ‚Äúinteractive‚Äù.\n\n\n\n\n\n\n\nPlus g√©n√©ralement la fonction locator() permet de cliquer sur une figure et d‚Äôobtenir les coordonn√©es d‚Äôun point dans le syst√®me de coordonn√©es de la figure (de la carte). locator()peut √™tre utilis√©e sur la plupart des graphiques (pas ceux produits avec ggplot2).",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Map Layout</span>"
    ]
  },
  {
    "objectID": "04_mise_en_page.html#ajouter-un-ombrage-√†-une-couche",
    "href": "04_mise_en_page.html#ajouter-un-ombrage-√†-une-couche",
    "title": "4¬† Map Layout",
    "section": "4.14 Ajouter un ombrage √† une couche",
    "text": "4.14 Ajouter un ombrage √† une couche\nLa fonction mf_shadow() permet de cr√©er une ombre √† une couche de polygones.\n\nmf_theme(\"default\")\nmf_shadow(com)\nmf_map(com, add=TRUE)",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Map Layout</span>"
    ]
  },
  {
    "objectID": "04_mise_en_page.html#exercice",
    "href": "04_mise_en_page.html#exercice",
    "title": "4¬† Map Layout",
    "section": "Exercice",
    "text": "Exercice\n\nImporter la couche des communes du d√©partement du Lot √† partir du fichier geopackage lot.gpkg.\nImporter le fichier com.csv.\nCe jeu de donn√©es porte sur les communes du lot et contient plusieurs variables suppl√©mentaires:\n\nle nombre d‚Äôactifs (ACT).\nle nombre d‚Äôactifs dans l‚Äôindustrie (IND)\nLa part des actifs dans la population totale (SACT)\nLa part des actifs dans l‚Äôindustrie dans le total des actifs (SACT_IND)\n\nJoindre le jeu de donn√©es et la couche des communes.\nCr√©ez une carte repr√©sentant la population active travaillant dans l‚Äôindustrie.\nAjoutez les √©l√©ments d‚Äôhabillage indispensables.\nUtilisez un th√®me personnalis√©.\nAjoutez un carton de localisation du Lot.\nExportez la carte au format PNG avec 800 pixels de large.\nComment rendre la carte plus intelligible ? Allez-y !\n\n\n\n\n\n\n\nVous pouvez utiliser le fichier exo_cartographie_mise_en_page.R pour vous guider dans cette exercice.",
    "crumbs": [
      "<span class='chapter-number'>4</span>¬† <span class='chapter-title'>Map Layout</span>"
    ]
  },
  {
    "objectID": "2000_references.html",
    "href": "2000_references.html",
    "title": "References",
    "section": "",
    "text": "Dunnington, Dewey. 2023. Ggspatial: Spatial Data Framework for\nGgplot2. https://CRAN.R-project.org/package=ggspatial.\n\n\nGiraud, Timoth√©e. 2023. Mapsf: Thematic Cartography. https://CRAN.R-project.org/package=mapsf.\n\n\nTennekes, Martijn. 2018. ‚Äútmap:\nThematic Maps in R.‚Äù Journal of Statistical\nSoftware 84 (6): 1‚Äì39. https://doi.org/10.18637/jss.v084.i06.\n\n\nWickham, Hadley. 2016. Ggplot2: Elegant Graphics for Data\nAnalysis. Springer-Verlag New York. https://ggplot2.tidyverse.org.",
    "crumbs": [
      "References"
    ]
  },
  {
    "objectID": "2002_data.html",
    "href": "2002_data.html",
    "title": "Appendix A ‚Äî Les donn√©es du projet",
    "section": "",
    "text": "Les donn√©es utilis√©es dans ce document sont stock√©es dans un projet RStudio. Vous devez le t√©l√©charger puis le d√©compresser sur votre machine. Il vous sera ensuite possible de tester l‚Äôensemble des manipulations propos√©es dans ce document au sein du projet geodata.\nT√©l√©charger le projet\n lot.gpkg\nCe fichier contient plusieurs couches d‚Äôinformations.\n\ndepartements : les d√©partements fran√ßais m√©tropolitains, Admin Express COG Carto 3.0, IGN - 2021;\ncommunes : les communes du d√©partement du Lot (46) avec des donn√©es sur la population active occup√©e √¢g√©e de 25 √† 54 ans, par secteur d‚Äôactivit√© et sexe, au lieu de r√©sidence, en 2017, BD CARTO¬Æ 4.0, IGN - 2021 & Recensements harmonis√©s - S√©ries d√©partementales et communales, INSEE - 2020;\nroutes : les routes de la commune de Gramat et alentours (46128), BD CARTO¬Æ 4.0, IGN - 2021;\nrestaurants : les restaurants du Lot, Base permanente des √©quipements (BPE), INSEE - 2021;\nelevations : une grille r√©guli√®re de points d‚Äôaltitude (pas d‚Äô1 km), Jarvis A., H.I. Reuter, A. Nelson, E. Guevara, 2008, Hole-filled seamless SRTM data V4, International Centre for Tropical Agriculture (CIAT).\n\n com.csv\nCe fichier tabulaire contient des informations compl√©mentaire sur la population active occup√©e √¢g√©e de 25 √† 54 ans, par secteur d‚Äôactivit√© et sexe, au lieu de r√©sidence, en 2017, Recensements harmonis√©s - S√©ries d√©partementales et communales, INSEE - 2020.\n\nle nombre d‚Äôactifs (ACT);\nle nombre d‚Äôactifs dans l‚Äôindustrie (IND);\nla part des actifs dans la population totale (SACT);\nla part des actifs dans l‚Äôindustrie dans le total des actifs (SACT_IND).\n\n elevation.tif\nUne grille r√©guli√®re de points d‚Äôaltitude (pas de 30 m√®tres environ), Jarvis A., H.I. Reuter, A. Nelson, E. Guevara, 2008, Hole-filled seamless SRTM data V4, International Centre for Tropical Agriculture (CIAT).\nelev.tif est une version reprojet√©e en Lambert 93 de elevation.tif\n clc_2018.tif\nDonn√©es CORINE Land Cover, Corine Land Cover (CLC) 2018, Version 2020_20u1 - Copernicus Programme.\nclc.tif est une version reprojet√©e en Lambert 93 de clc_2018.tif\n Sentinel2A.tif\nDonn√©es Sentinel, Sentinel, Sentinel-2A, S2A_OPER_MSI_L2A_DS_VGS2_20211012T140548_S20211012T105447_N03.01, 12 Octobre 2021 - Copernicus Programme, t√©l√©charg√© le 28 d√©cembre 2021.",
    "crumbs": [
      "Appendices",
      "<span class='chapter-number'>A</span>¬† <span class='chapter-title'>Les donn√©es du projet</span>"
    ]
  }
]